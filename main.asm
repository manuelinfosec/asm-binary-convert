.ORIG x3000

	LEA 	R0, HELLO		
	PUTS
BEGIN	AND	R1, R1, #0		
	AND	R2, R2, #0			
	AND	R3, R3, #0			
	AND	R4, R4, #0			
	AND	R5, R5, #0			
	AND	R6, R6, #0			
	AND	R7, R7, #0			

	LEA 	R0, MSG			
	PUTS
	LD 	R2, ENDX
	LD	R3, HYPHEN
	LD	R4, ENT

INPUT	GETC
	OUT
	ADD	R6, R0, R2
	BRz	END					
	ADD	R6, R0, R3			
	BRz	NEG	
	LD	R6, TIMES	
TEN	ADD	R5, R1, R5			
	ADD	R6, R6, #-1			
	BRp	TEN	
	ADD	R1, R0, R4	
	BRz	PRINT				
	LD	R1, DIGIT	
	ADD	R0, R0, R1			
	ADD	R1, R5, #0			
	ADD	R5, R0, R5			
	BR	INPUT				

PRINT	ADD	R1, R3, #-1	
	BRn	PRINTC				
	NOT 	R5, R5			
	ADD	R5, R5, #1			
PRINTC	LD	R1, COUNT	
	LD	R2, MASKS			
	LEA	R3, MASKS			
COMP	AND	R0, R2, R5		
	BRz	PRINTZ
	BR	PRINTO

PRINTZ	LD	R0, ZERO		
	OUT
	BR 	DEC

PRINTO	LD	R0, ONE			
	OUT
	BR 	DEC

DEC	ADD	R3, R3, #1			
	ADD	R1, R1, #-1			
	BRn	BEGIN				
	LDR	R2, R3, #0			
	BR	COMP				

NEG	AND	R3, R3, #0		
	ADD	R3, R3, #1
	BR	INPUT

END	TRAP	x25

TIMES	.FILL		#9		
DIGIT	.FILL		#-48	
HYPHEN	.FILL		#-45	
ENDX	.FILL		#-88	
ENT	.FILL		#-10		
COUNT	.FILL		#15		
ZERO	.FILL		#48		
ONE	.FILL		#49			
MASKS	.FILL	x8000	 	
	.FILL		x4000
	.FILL		x2000
	.FILL		x1000
	.FILL		x0800
	.FILL		x0400
	.FILL		x0200
	.FILL		x0100
	.FILL		x0080
	.FILL		x0040
	.FILL		x0020
	.FILL		x0010
	.FILL		x0008
	.FILL		x0004
	.FILL		x0002
	.FILL		x0001
HELLO 	.STRINGZ	"\nHello, welcome to a simple Decimal to Binary Converter"
MSG	.STRINGZ	"\nPlease enter a decimal or terminate with X:\n"

.END